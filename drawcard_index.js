const cards = [
  {
      name: 'Kindness',
      image: 'Images/Kindness.jpg',
      questions: [
          'How kind are you to yourself and those around you?',
          'How kind would you like to be in the future?'
      ]
  },
  {
      name: 'Empathy',
      image: 'Images/Empathy.jpg',
      questions: [
          'How well do you understand and feel others\' emotions?',
          'How empathetic would you like to be in the future?'
      ]
  },
  {
      name: 'Honesty',
      image: 'Images/Honesty.jpg',
      questions: [
          'How honest are you in your words and actions?',
          'How honest would you like to be in the future?'
      ]
  },
  {
      name: 'Compassion',
      image: 'Images/Compassion.jpg',
      questions: [
          'How often do you show compassion to yourself and others?',
          'How compassionate would you like to be in the future?'
      ]
  },
  {
      name: 'Generosity',
      image: 'Images/Generosity.jpg',
      questions: [
          'How generous are you with your time, resources, or support?',
          'How generous would you like to be in the future?'
      ]
  },
  {
      name: 'Gratitude',
      image: 'Images/Gratitude.jpg',
      questions: [
          'How often do you recognize and express gratitude in your life?',
          'How grateful would you like to be in the future?'
      ]
  },
  {
      name: 'Patience',
      image: 'Images/Patience.jpg',
      questions: [
          'How patient are you in challenging situations or with others?',
          'How patient would you like to be in the future?'
      ]
  },
  {
      name: 'Courage',
      image: 'Images/Courage.jpg',
      questions: [
          'How often do you act courageously to stand up for yourself or others in challenging situations?',
          'How courageous would you like to be in the future?'
      ]
  },
  {
      name: 'Resilience',
      image: 'Images/Resilience.jpg',
      questions: [
          'How well do you adapt and recover from difficult experiences?',
          'How resilient would you like to be in the future?'
      ]
  },
  {
      name: 'Authenticity',
      image: 'Images/Authenticity.jpg',
      questions: [
          'How true are you to your values and beliefs?',
          'How authentic would you like to be in the future?'
      ]
  },
  {
      name: 'Adaptability',
      image: 'Images/Adaptability.jpg',
      questions: [
          'How easily do you adapt to change and new situations?',
          'How adaptable would you like to be in the future?'
      ]
  },
  {
      name: 'Confidence',
      image: 'Images/Confidence.jpg',
      questions: [
          'How confident are you in your abilities and decisions?',
          'How confident would you like to be in the future?'
      ]
  },
  {
      name: 'Forgiveness',
      image: 'Images/Forgiveness.jpg',
      questions: [
          'How easily do you forgive yourself and others?',
          'How forgiving would you like to be in the future?'
      ]
  },
  {
      name: 'Optimism',
      image: 'Images/Optimism.jpg',
      questions: [
          'How optimistic are you when thinking about your future?',
          'How optimistic would you like to be in the future?'
      ]
  },
  {
      name: 'Humility',
      image: 'Images/Humility.jpg',
      questions: [
          'How humble are you in acknowledging your strengths and weaknesses?',
          'How humble would you like to be in the future?'
      ]
  },
  {
      name: 'Curiosity',
      image: 'Images/Curiosity.jpg',
      questions: [
          'How curious are you about the world, others, and yourself?',
          'How curious would you like to be in the future?'
      ]
  },
  {
      name: 'Determination',
      image: 'Images/Determination.jpg',
      questions: [
          'How determined are you when pursuing your goals?',
          'How determined would you like to be in the future?'
      ]
  },
  {
      name: 'Creativity',
      image: 'Images/Creativity.jpg',
      questions: [
          'How creative do you consider yourself to be?',
          'How creative would you like to be in the future?'
      ]
  },
  {
      name: 'Flexibility',
      image: 'Images/Flexibility.jpg',
      questions: [
          'How flexible are you when plans or expectations change?',
          'How flexible would you like to be in the future?'
      ]
  },
  {
      name: 'Integrity',
      image: 'Images/Integrity.jpg',
      questions: [
          'How consistently do you align your actions with your values?',
          'How much integrity would you like to have in the future?'
      ]
  },
  {
      name: 'Loyalty',
      image: 'Images/Loyalty.jpg',
      questions: [
          'How loyal are you to the people and causes you care about?',
          'How loyal would you like to be in the future?'
      ]
  },
  {
      name: 'Enthusiasm',
      image: 'Images/Enthusiasm.jpg',
      questions: [
          'How enthusiastic are you about your interests and pursuits?',
          'How enthusiastic would you like to be in the future?'
      ]
  },
  {
      name: 'Open-mindedness',
      image: 'Images/Open-mindedness.jpg',
      questions: [
          'How open are you to new ideas and perspectives?',
          'How open-minded would you like to be in the future?'
      ]
  },
  {
      name: 'Ambition',
      image: 'Images/Ambition.jpg',
      questions: [
          'How ambitious are you when setting and pursuing goals?',
          'How ambitious would you like to be in the future?'
      ]
  },
  {
      name: 'Tolerance',
      image: 'Images/Tolerance.jpg',
      questions: [
          'How tolerant are you of differences in people and ideas?',
          'How tolerant would you like to be in the future?'
      ]
  },
  {
      name: 'Playfulness',
      image: 'Images/Playfulness.jpg',
      questions: [
          'How often do you approach life with playfulness and joy?',
          'How playful would you like to be in the future?'
      ]
  },
  {
      name: 'Self-discipline',
      image: 'Images/Self-discipline.jpg',
      questions: [
          'How disciplined are you in working toward your goals?',
          'How self-disciplined would you like to be in the future?'
      ]
  },
  {
      name: 'Resourcefulness',
      image: 'Images/Resourcefulness.jpg',
      questions: [
          'How resourceful are you in solving problems and finding solutions?',
          'How resourceful would you like to be in the future?'
      ]
  },

  {
    name: 'Insightfulness',
    image: 'Images/Insightfulness.jpg',
    questions: [
        'How often do you gain meaningful insights about yourself and others?',
        'How insightful would you like to be in the future?'
    ]
  },
  {
    name: 'Self-awareness',
    image: 'Images/Self-awareness.jpg',
    questions: [
       'How aware are you of your thoughts, emotions, and actions?',
        'How self-aware would you like to be in the future?'
    ]
  },
  {
    name: 'Humor',
    image: 'Images/Humor.jpg',
    questions: [
        'How often do you use humor to brighten your life and others’?',
        'How humorous would you like to be in the future?'
    ]
  },
  {
    name: 'Respectfulness',
    image: 'Images/Respectfulness.jpg',
    questions: [
        'How respectful are you toward others and their perspectives?',
        'How respectful would you like to be in the future?'
    ]
  },
  {
    name: 'Reliability',
    image: 'Images/Reliability.jpg',
    questions: [
        'How reliable are you when others depend on you?',
        'How reliable would you like to be in the future?'
    ]
  },
  {
    name: 'Vulnerability',
    image: 'Images/Vulnerability.jpg',
    questions: [
       'How willing are you to show vulnerability in relationships?',
        'How vulnerable would you like to be in the future?'
    ]
  },
  {
    name: 'Independence',
    image: 'Images/Independence.jpg',
    questions: [
        'How independent are you in making decisions and managing your life?',
        'How independent would you like to be in the future?'
    ]
  },
  {
    name: 'Altruism',
    image: 'Images/Altruism.jpg',
    questions: [
        'How often do you act selflessly for the benefit of others?',
        'How altruistic would you like to be in the future?'
    ]
  },
  {
    name: 'Bravery',
    image: 'Images/Bravery.jpg',
    questions: [
        'How brave are you in facing your fears and challenges?',
       'How brave would you like to be in the future?'
    ]
  },
  {
    name: 'Self-compassion',
    image: 'Images/Self-Compassion.jpg',
    questions: [
       'How compassionate are you toward your own struggles and mistakes?',
       'How self-compassionate would you like to be in the future?'
    ]
  },
  {
    name: 'Trustworthiness',
    image: 'Images/Trustworthiness.jpg',
    questions: [
       'How trustworthy are you in your relationships and commitments?',
        'How trustworthy would you like to be in the future?'
    ]
  },
  {
    name: 'Calmness',
    image: 'Images/Calmness.jpg',
    questions: [
        'How calm are you in stressful or demanding situations?',
        'How calm would you like to be in the future?'
    ]
  },
  {
    name: 'Supportiveness',
    image: 'Images/Supportiveness.jpg',
    questions: [
       'How supportive are you of others’ goals and challenges?',
        'How supportive would you like to be in the future?'
    ]
  },
  {
    name: 'Wisdom',
    image: 'Images/Wisdom.jpg',
    questions: [
        'How often do you apply wisdom to your decisions and actions?',
       'How wise would you like to be in the future?'
    ]
  },
  {
    name: 'Mindfulness',
    image: 'Images/Mindfulness.jpg',
    questions: [
       'How mindful are you in the present moment?',
       'How mindful would you like to be in the future?'
    ]
  },
  {
    name: 'Inclusiveness',
    image: 'Images/Inclusiveness.jpg',
    questions: [
       'How inclusive are you in your thoughts and actions?',
       'How inclusive would you like to be in the future?'
    ]
  },
  {
    name: 'Empowerment',
    image: 'Images/Empowerment.jpg',
    questions: [
        'How often do you empower yourself and others?',
       'How empowered would you like to feel in the future?'
    ]
  },
  {
    name: 'Fairness',
    image: 'Images/Fairness.jpg',
    questions: [
        'How fair are you in your judgments and decisions?',
        'How fair would you like to be in the future?'
    ]
  },
  {
    name: 'Decisiveness',
    image: 'Images/Decisiveness.jpg',
    questions: [
        'How decisive are you when making important choices?',
        'How decisive would you like to be in the future?'
    ]
  },
  {
    name: 'Passion',
    image: 'Images/Passion.jpg',
    questions: [
        'How passionate are you about your pursuits and interests?',
       'How passionate would you like to be in the future?'
    ]
  },
  {
    name: 'Sympathy',
    image: 'Images/Sympathy.jpg',
    questions: [
       'How sympathetic are you toward others’ challenges?',
        'How sympathetic would you like to be in the future?'
    ]
  },
  {
    name: 'Intelligence',
    image: 'Images/Intelligence.jpg',
    questions: [
       'How effectively do you use your intelligence to solve problems and achieve personal growth?',
       'How intelligent would you like to be in the future?'
    ]
  },
  {
    name: 'Inspiration',
    image: 'Images/Inspiration.jpg',
    questions: [
        'How often do you inspire others through your actions and ideas?',
        'How inspiring would you like to be in the future?'
    ]
  },
  {
    name: 'Maturity',
    image: 'Images/Matureness.jpg',
    questions: [
        'How mature are you in handling challenges and emotions?',
        'How mature would you like to be in the future?'
    ]
  },
  {
    name: 'Progressiveness',
    image: 'Images/Progressiveness.jpg',
    questions: [
       'How progressive are you in embracing change and innovation?',
       'How progressive would you like to be in the future?'
    ]
  }
// Add the remaining entries similarly...
];



let remainingCards = [...cards]; // Copy of the cards array
let currentCard = null; // Track the current card


// Ensure that saving user responses always includes "adjective"
function saveResponse(firstQuestionAnswer, secondQuestionAnswer) {
  if (!currentCard || !currentCard.adjective) {
      console.error('Current card is missing a valid adjective:', currentCard);
      return; // Do not save malformed data
  }

  const response = {
      adjective: currentCard.adjective,
      firstQuestion: firstQuestionAnswer,
      secondQuestion: secondQuestionAnswer
  };

  // Save to localStorage
  let userResponses = JSON.parse(localStorage.getItem('userResponses')) || [];
  userResponses.push(response);
  localStorage.setItem('userResponses', JSON.stringify(userResponses));
}


// Function to generate rating buttons
// Function to generate rating buttons
function createRatingButtons(containerId, questionKey) {
  const container = document.getElementById(containerId);
  container.innerHTML = ''; // Clear previous buttons

  for (let i = 1; i <= 10; i++) {
      const button = document.createElement('button');
      button.textContent = i;

      button.addEventListener('click', () => {
          // Save the answer in the currentCard object
          currentCard[questionKey] = i; // e.g., 'firstQuestion' or 'secondQuestion'

          // Highlight the selected button
          Array.from(container.children).forEach(btn => btn.classList.remove('selected'));
          button.classList.add('selected');

          // Save the updated data to localStorage
          saveToLocalStorage();
      });

      container.appendChild(button);
  }
}

// Function to save the current results to localStorage
function saveToLocalStorage() {
  let userResponses = JSON.parse(localStorage.getItem('userResponses')) || [];

  // Ensure the current card has an adjective name
  if (!currentCard || !currentCard.name) {
      console.error('Error: Current card is missing a name');
      return;
  }

  // Find if this card already exists in the stored data
  const existingEntryIndex = userResponses.findIndex(entry => entry.adjective === currentCard.name);

  if (existingEntryIndex !== -1) {
      // Update the existing entry
      userResponses[existingEntryIndex] = {
          adjective: currentCard.name,
          firstQuestion: currentCard.firstQuestion || null,
          secondQuestion: currentCard.secondQuestion || null,
      };
  } else {
      // Add a new entry
      userResponses.push({
          adjective: currentCard.name,
          firstQuestion: currentCard.firstQuestion || null,
          secondQuestion: currentCard.secondQuestion || null,
      });
  }

  // Save back to localStorage
  localStorage.setItem('userResponses', JSON.stringify(userResponses));
}


// Function to update the progress bar
function updateProgressBar() {
  const progressBar = document.getElementById('progress-bar');
  const totalCards = cards.length; // Total number of cards at the start
  const remaining = remainingCards.length; // Cards left to draw
  const percentage = (remaining / totalCards) * 100;
  progressBar.style.width = `${percentage}%`;

  // If no cards are left, hide the "Next Card" button
  if (remaining === 0) {
      document.getElementById('next-btn').style.display = 'none';
  }
}

// Function to get a random card and display it
function getRandomCard() {
  if (remainingCards.length === 0) {
      alert("No more cards left!");
      return;
  }

  // Pick a random card
  const randomIndex = Math.floor(Math.random() * remainingCards.length);
  currentCard = remainingCards.splice(randomIndex, 1)[0]; // Remove selected card from the array

  // Ensure `firstQuestion` and `secondQuestion` properties are reset
  currentCard.firstQuestion = null;
  currentCard.secondQuestion = null;

  // Update the UI
  document.getElementById('question1').textContent = currentCard.questions[0];
  document.getElementById('question2').textContent = currentCard.questions[1];
  document.getElementById('card-img').src = currentCard.image;

  // Generate rating buttons
  createRatingButtons('rating1', 'firstQuestion');
  createRatingButtons('rating2', 'secondQuestion');
    // Update the progress bar after drawing a card
    updateProgressBar();
}


// Function to display results
function showResults() {
    // Redirect to the results page
    window.location.href = 'results.html';
}

// Load the first card
getRandomCard();

// Event listeners
document.getElementById('next-btn').addEventListener('click', getRandomCard);
document.getElementById('results-btn').addEventListener('click', showResults);


console.log('Saved responses:', JSON.parse(localStorage.getItem('userResponses')));

updateProgressBar();
